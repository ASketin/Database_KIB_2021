# Настройка 

Допустимо использовать образ с прошлого задания или поставить этот. Обратите внимание на пересечение портов с предыдущим заданием. 

# Задание 

Домашнее задание состоит из 7 заданий. Студент подготавливает архив homework с 10 файлами с названием hw4_task<номер заания>.sql. В скобках к заданию написаны названия полей для вывода. 

Для заданий предполагается база данных chinook.
[схема базы данных](https://github.com/lerocha/chinook-database/wiki/Chinook-Schema)

Только вместо caseCamel используется подчеркивание. Например, вместо поля AlbumId -> album_id

## Задание 1
Для каждого артиста вывести все жанры, которые есть в его песнях, и для каждого жанра вывести наиболее продолжительную песню. (artist_name, genre_name, track_name, track_length)

## Задание 2 
Для каждой компании вывести трек, за который компания заплатила наибольшую сумму, вывести жанр данного трека и его альбом. (company_name, genre_name, track_name)i

## Задание 3
Вывести все интервалы, в которые не было нанято ни одного сотрудника. Минимальная дата - 1999-01-01, Максимальная - 2020-01-01. Например, если первый сотрудник был нанят 2010-01-02, то первая строка в ответе будет (1999-01-01, 2010-01-01). Интервалы должны быть непересекающимися и закрытыми. Строки должны быть выведене в результирующей выборке в порядке возрастания (date_start, date_end)

## Задание 4 
Для каждого плейлиста вывести трек с наибольшей продолжительностью, трек с наименьшей стоимостью (если у треков одинаковая стоимость, то вывести тот, который весит меньше всех), и жанр данного плейлиста (жанром плейлиста называется тот жанр, треков которого больше всех в плейлисте) (playlist_name, longest_track_name, minimal_price_track, playlist_genre_name).

## Задание 5 
Для каждого сотрудника вывести общее количество купленных треков, проведенных им в заказе, самый часто используемый жанр треков, и общее число треков по минимальной стоимости. Если у сотрудника есть подчиненные, то все величины должны быть подсчитаны с учетом подчинения (то есть все заказы, которые обслужил сам сотрудник + заказы его подчиненных). Учесть потенциальную глубину вложенности. (employee_name, tracks_count, most_popular_genre, tracks_minimal_price).


## Задание 6 
Для каждого жанра вывести треки, которые встречались в большем числе заказов, сумму, потраченную, на данные треки, количество купленных треков и компанию, которая больше всех приобрела данную композицию (genre_name, overall_pay, track_count, company_name)

## Задание 7 (*)
У каждой компании есть бюджет 2000$. Для оставшегося бюджета (помимо уже приобретенных треков) рассчитать максимальное число жанров, по которым компания может еще приобрести трека из правила, что жанр учитывается, если компания может хоть какие-то 5 треков этого жанра исходя из бюджет. Также вывести список этих жанров в массиве. (company_name, genres_count, genres_array)

То есть фактически у вас остался бюджет X из 2000$. Необходимо понять, какие еще жанра можно докупить на данный бюджет. Жанр считается докупленным, если вы можете приобрести хоть какие-то 5 треков жанра (если треков < 5, то соответственно, что вы сможете приобрести все треки жанра)
